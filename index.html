<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/Dhruv-Sadrawala/D-v-Jump/main/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta property="og:description" content="Jump over bugs and survive the IT jungle with your laptop!" />
  <meta property="og:image" content="https://raw.githubusercontent.com/Dhruv-Sadrawala/D-v-Jump/main/og.png" />
  <meta property="og:type" content="website" />
  <title>D^v Jump – Jump Over Bugs and Compile to Glory</title>

  <!-- Pixel Font -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; height: 100%; overflow: hidden; background: #fff; }

    .game { width: 100vw; height: 100vh; position: relative; overflow: hidden; }

    .background {
      position: absolute; width: 100%; height: 100%;
      background: url('bg.jpg') no-repeat center center;
      background-size: cover; z-index: 0;
    }

    .overlay {
      position: absolute; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.3); z-index: 1;
    }

    #ground {
      position: absolute; bottom: 0; width: 100%; height: 40px;
      background: url('ground.png') repeat-x; z-index: 2;
    }

    #baseline {
      position: absolute; bottom: 25vh; /* ⬆ Moved baseline up */
      width: 100%; height: 10px; background-color: #cdf0fc; z-index: 3;
    }

    #dino {
      width: 130px; height: 200px;
      position: absolute; bottom: calc(25vh + 10px); /* ⬆ Match baseline height */
      left: 50px; z-index: 4;
    }

    #dino img {
      width: 100%; height: 100%; object-fit: contain;
      image-rendering: pixelated;
    }

    #cactus {
      width: 70px; height: 100px;
      position: absolute; bottom: calc(25vh + 10px); /* ⬆ Same as dino */
      right: -70px; animation: moveCactus 3s linear infinite; z-index: 4;
    }

    #cactus img {
      width: 100%; height: 120%; object-fit: contain;
      image-rendering: pixelated;
    }

    @keyframes moveCactus {
      0% { right: -70px; }
      100% { right: 100vw; }
    }

    #score {
      position: absolute; top: 10px; right: 20px;
      color: #fff; font-family: 'Press Start 2P', cursive;
      font-size: 16px; background: rgba(0, 0, 0, 0.5);
      padding: 4px 8px; border-radius: 4px;
      box-shadow: 0 0 3px #000; z-index: 10;
    }

    #gameOverScreen {
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.5);
      z-index: 20; display: none;
      flex-direction: column; justify-content: center; align-items: center;
    }

    .game-over-text {
      font-family: 'Press Start 2P', cursive;
      font-size: 50px; color: white;
      margin-bottom: 30px; text-shadow: 2px 2px 5px #000;
    }

    .replay-icon {
      font-family: 'Press Start 2P', cursive;
      font-size: 50px; color: white; cursor: pointer;
      padding: 16px 24px; background-color: rgba(255, 255, 255, 0.1);
      border-radius: 12px; text-shadow: 1px 1px 3px #000;
      transition: transform 0.2s;
    }
    .replay-icon:hover { transform: scale(1.1); }

    @media (max-width: 768px) {
      #dino { height: 170px; }
      #cactus { height: 80px; animation-duration: 2s; }
      #cactus img { height: 70%; }
      .game-over-text { font-size: 30px; }
      .replay-icon { font-size: 30px; padding: 12px 18px; }
      #score { font-size: 15px; }
    }
  </style>
</head>
<body>

<div class="game" id="gameArea">
  <div class="background"></div>
  <div class="overlay"></div>

  <div id="score">Score: 0</div>

  <div id="dino">
    <img id="dinoImg" src="stand1.png" alt="dino" />
  </div>

  <div id="cactus">
    <img src="cactus.png" alt="cactus" />
  </div>

  <div id="ground"></div>
  <div id="baseline"></div>
</div>

<div id="gameOverScreen">
  <div class="game-over-text">Game Over</div>
  <div class="replay-icon" onclick="location.reload()">
    <img src="retry.png" height="50px" width="50px" alt="Retry" />
  </div>
</div>

<audio id="jumpSound" src="https://cdn.freesound.org/previews/386/386629_3905081-lq.mp3"></audio>
<audio id="collisionSound" src="https://cdn.freesound.org/previews/391/391658_7368738-lq.mp3"></audio>

<script>
  const dino = document.getElementById("dino");
  const dinoImg = document.getElementById("dinoImg");
  const cactus = document.getElementById("cactus");
  const scoreDisplay = document.getElementById("score");
  const gameOverScreen = document.getElementById("gameOverScreen");

  const jumpSound = document.getElementById("jumpSound");
  const collisionSound = document.getElementById("collisionSound");

  let isJumping = false;
  let position = 0;
  let score = 0;
  let gameOver = false;
  const isMobile = window.innerWidth <= 768;

  const frames = {
    stand1: "stand1.png",
    bend1: "bend1.png",
    jump: "jump1.png",
    bend2: "bend2.png"
  };

  document.addEventListener("keydown", e => {
    if (e.code === "Space" && !isJumping && !gameOver) jump();
  });

  document.getElementById("gameArea").addEventListener("touchstart", () => {
    if (!isJumping && !gameOver) jump();
  });

  function jump() {
    isJumping = true;
    jumpSound.currentTime = 0;
    jumpSound.play();
    dinoImg.src = frames.bend1;

    setTimeout(() => { dinoImg.src = frames.jump; }, 100);

    let jumpHeight = isMobile ? 160 : 200;
    let jumpStep = isMobile ? 7 : 10; // Faster jump on mobile

    let upInterval = setInterval(() => {
      if (position >= jumpHeight) {
        clearInterval(upInterval);
        let downInterval = setInterval(() => {
          if (position <= 0) {
            clearInterval(downInterval);
            isJumping = false;
            dinoImg.src = frames.bend2;
            setTimeout(() => { dinoImg.src = frames.stand1; }, 100);
          } else {
            position -= jumpStep;
            dino.style.bottom = `calc(${25}vh + 10px + ${position}px)`;
          }
        }, 15);
      } else {
        position += jumpStep;
        dino.style.bottom = `calc(${25}vh + 10px + ${position}px)`;
      }
    }, 15);
  }

  const collisionCheck = setInterval(() => {
    const dinoRect = dino.getBoundingClientRect();
    const cactusRect = cactus.getBoundingClientRect();
    const bufferX = 40, bufferY = 40;

    const isHorizontallyOverlapping =
      cactusRect.left < dinoRect.right - bufferX &&
      cactusRect.right > dinoRect.left + bufferX;

    const isVerticallyOverlapping =
      dinoRect.bottom - bufferY > cactusRect.top;

    if (isHorizontallyOverlapping && isVerticallyOverlapping && !gameOver) {
      gameOver = true;
      gameOverScreen.style.display = "flex";
      clearInterval(scoreInterval);
      cactus.style.animationPlayState = "paused";
      collisionSound.currentTime = 0;
      collisionSound.play();
    }
  }, 10);

  const scoreInterval = setInterval(() => {
    if (!document.hidden && !gameOver) {
      score++;
      scoreDisplay.textContent = "Score: " + score;
    }
  }, 100);
</script>

</body>
</html>
